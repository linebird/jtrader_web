<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Multi-Strategy Backtest Dashboard</title>
    {{ resources | safe }}
    <style>
        body { margin: 0; font-family: sans-serif; background-color: #f8f9fa; }
        header { 
            background-color: #2c3e50; color: white; padding: 10px 20px; 
            display: flex; justify-content: space-between; align-items: center; 
        }
        .search-form { display: flex; gap: 12px; align-items: center; }
        .search-form div { display: flex; flex-direction: column; }
        label { font-size: 0.7rem; color: #bdc3c7; margin-bottom: 2px; }
        input, select { padding: 5px; border-radius: 4px; border: none; font-size: 0.9rem; }
        button { 
            padding: 8px 15px; background-color: #27ae60; color: white; border: none; 
            border-radius: 4px; cursor: pointer; font-weight: bold; margin-top: 12px;
        }
        .stats-bar { display: flex; justify-content: space-around; background: white; padding: 10px; border-bottom: 1px solid #ddd; }
        .stat-value { font-weight: bold; color: #27ae60; font-size: 1.1rem; }
    </style>
</head>
<body>

    <header>
        <div style="font-size: 1.3rem; font-weight: bold;">K-Stock Dashboard</div>
        <form method="POST" class="search-form">
            <div>
                <label>전략 선택</label>
                <select name="strategy">
                    <option value="slope" {% if strategy == 'slope' %}selected{% endif %}>이평선 기울기</option>
                    <option value="cross" {% if strategy == 'cross' %}selected{% endif %}>골든크로스(5/20)</option>
                </select>
            </div>
            <div>
                <label>종목코드</label>
                <input type="text" name="ticker" value="{{ ticker }}" style="width: 70px;">
            </div>
            <div>
                <label>시작일</label>
                <input type="date" name="from_date" value="{{ from_date }}">
            </div>
            <div>
                <label>종료일</label>
                <input type="date" name="to_date" value="{{ to_date }}">
            </div>
            <button type="submit">테스트 실행</button>
        </form>
    </header>

    {% if stats %}
    <div class="stats-bar">
        <div>수익률: <span class="stat-value">{{ stats.Return }}</span></div>
        <div>승률: <span class="stat-value">{{ stats.WinRate }}</span></div>
        <div>거래횟수: <span class="stat-value">{{ stats.Trades }}</span></div>
    </div>
    {% endif %}

    <div style="width: 100%;">
        {{ div | safe }}
    </div>

    {{ script | safe }}

</body>
</html>